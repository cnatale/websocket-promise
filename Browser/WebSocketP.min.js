!function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(e,t,n){for(var o=!0;o;){var i=e,r=t,s=n;a=c=u=void 0,o=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,r);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=r,n=s,o=!0}},s=e("zm-event-kit").Emitter,a=function(e){function t(e){n(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.debug=e}return o(t,e),i(t,[{key:"gotMessage",value:function(e,t){if(t.SB)if(this.debug&&console.debug(t),"send"===t.Genre){t.Response=null;var n=void 0;try{this.emit(t.Type,t),n=t.Response instanceof Promise?t.Response:Promise.resolve(t.Response)}catch(o){n=Promise.reject(o)}n.then(function(n){e({Genre:"response",Status:!0,Result:n,ID:t.ID,SB:!0})},function(n){n instanceof Error&&(n={stack:n.stack,message:n.message}),e({Genre:"response",Status:!1,Result:n,ID:t.ID,SB:!0})})}else"response"===t.Genre&&this.emit("JOB:"+t.ID,t)}},{key:"request",value:function(e,n,o){var i=this;return new Promise(function(r,s){var a=t.randomId(),u=i.on("JOB:"+a,function(e){u.dispose(),e.Status?r(e.Result):s(e.Result)});e({Type:n,Genre:"send",Message:o,SB:!0,ID:a})})}}],[{key:"randomId",value:function(){return(Math.random().toString(36)+"00000000000000000").slice(2,9)}}]),t}(s);t.exports=a},{"zm-event-kit":2}],2:[function(e,t){"use strict";"undefined"!=typeof window?(window.EventKit=window.EventKit||{CompositeDisposable:e("./CompositeDisposable"),Disposable:e("./Disposable"),Emitter:e("./Emitter")},t.exports=window.EventKit):"undefined"!=typeof self&&(self.EventKit=self.EventKit||{CompositeDisposable:e("./CompositeDisposable"),Disposable:e("./Disposable"),Emitter:e("./Emitter")},t.exports=self.EventKit)},{"./CompositeDisposable":3,"./Disposable":4,"./Emitter":5}],3:[function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){n(this,e),this.disposed=!1,this.disposables=new Set(arguments)}return o(e,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposables.forEach(function(e){return e.dispose()}),this.disposables=null)}},{key:"add",value:function(){var e=this;this.disposed||Array.prototype.forEach.call(arguments,function(t){return e.disposables.add(t)})}},{key:"remove",value:function(){var e=this;this.disposed||Array.prototype.forEach.call(arguments,function(t){return e.disposables["delete"](t)})}},{key:"clear",value:function(){this.disposed||this.disposables.clear()}}]),e}();t.exports=i},{}],4:[function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){n(this,e),this.disposed=!1,this.callback=t}return o(e,[{key:"dispose",value:function(){this.disposed||("function"==typeof this.callback&&this.callback(),this.callback=null,this.disposed=!0)}}]),e}();t.exports=i},{}],5:[function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("./Disposable"),r=function(){function e(){n(this,e),this.disposed=!1,this.handlersByEventName={}}return o(e,[{key:"dispose",value:function(){this.disposed=!0,this.handlersByEventName=null}},{key:"on",value:function(e,t){var n=this;if(this.disposed)throw new Error("Emitter has been disposed");if("function"!=typeof t)throw new Error("Handler must be a function");return this.handlersByEventName.hasOwnProperty(e)?this.handlersByEventName[e].push(t):this.handlersByEventName[e]=[t],new i(function(){return n.off(e,t)})}},{key:"off",value:function(e,t){if(!this.disposed&&this.handlersByEventName.hasOwnProperty(e)){var n=void 0;-1!==(n=this.handlersByEventName[e].indexOf(t))&&this.handlersByEventName[e].splice(n,1)}}},{key:"clear",value:function(){this.handlersByEventName={}}},{key:"emit",value:function(e,t){!this.disposed&&this.handlersByEventName.hasOwnProperty(e)&&this.handlersByEventName[e].forEach(function(e){return e(t)})}}]),e}();t.exports=r},{"./Disposable":4}],6:[function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),o=e("sb-communication"),i=function(){function e(n){t(this,e);var i=this;this.Communication=new o(!1),this.Connection=new WebSocket(n),this.sendCallback=function(e){i.Connection.send(JSON.stringify(e))},this.Connection.addEventListener("message",function(e){try{e=JSON.parse(e.data)}catch(t){return i.emit("ParseError",e)}i.Communication.gotMessage(i.sendCallback,e)})}return n(e,[{key:"on",value:function(e,t){return this.Communication.on(e,t)}},{key:"request",value:function(e,t){return this.Communication.request(this.sendCallback,e,t)}},{key:"terminate",value:function(){this.Connection.close()}}]),e}();window.WebSocketP=i},{"sb-communication":1}]},{},[6]);